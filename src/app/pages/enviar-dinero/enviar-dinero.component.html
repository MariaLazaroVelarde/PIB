<div class="min-h-screen bg-gray-50">
  <!-- Header -->
  <div class="bg-white px-6 py-4 flex items-center space-x-4 border-b border-gray-200">
    <button (click)="volver()" class="p-2 hover:bg-gray-100 rounded-full transition-colors">
      <svg class="w-6 h-6 text-gray-600" fill="currentColor" viewBox="0 0 24 24">
        <path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"/>
      </svg>
    </button>
    <h1 class="text-xl font-semibold text-gray-900">Enviar dinero</h1>
  </div>

  <!-- Monto a enviar -->
  <div class="px-6 py-8 text-center">
    <p class="text-gray-600 mb-2">Monto a enviar</p>
    <div class="text-4xl font-bold text-gray-900 mb-8">
      S/ <span>{{ monto || '0.00' }}</span>
    </div>

    <!-- Teclado numérico -->
    <div class="grid grid-cols-3 gap-4 max-w-xs mx-auto mb-8">
      <button *ngFor="let numero of ['1','2','3','4','5','6','7','8','9']"
              (click)="agregarNumero(numero)"
              class="w-16 h-16 bg-gray-100 hover:bg-gray-200 rounded-full text-xl font-semibold text-gray-900 transition-colors">
        {{ numero }}
      </button>

      <button (click)="agregarNumero('.')"
              class="w-16 h-16 bg-gray-100 hover:bg-gray-200 rounded-full text-xl font-semibold text-gray-900 transition-colors">
        .
      </button>

      <button (click)="agregarNumero('0')"
              class="w-16 h-16 bg-gray-100 hover:bg-gray-200 rounded-full text-xl font-semibold text-gray-900 transition-colors">
        0
      </button>

      <button (click)="borrarUltimo()"
              class="w-16 h-16 bg-gray-100 hover:bg-gray-200 rounded-full flex items-center justify-center transition-colors">
        <svg class="w-6 h-6 text-gray-600" fill="currentColor" viewBox="0 0 24 24">
          <path d="M22 3H7c-.69 0-1.23.35-1.59.88L0 12l5.41 8.11c.36.53.9.89 1.59.89h15c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-3 12.59L17.59 17 14 13.41 10.41 17 9 15.59 12.59 12 9 8.41 10.41 7 14 10.59 17.59 7 19 8.41 15.41 12 19 15.59z"/>
        </svg>
      </button>
    </div>

    <!-- Descripción -->
    <div class="mb-8">
      <label class="block text-left text-gray-700 font-medium mb-2">Descripción (opcional)</label>
      <input
        type="text"
        [(ngModel)]="descripcion"
        placeholder="¿Para qué es el pago?"
        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent">
    </div>
  </div>

  <!-- Selección de contacto -->
  <div class="bg-white px-6 py-6">
    <div class="flex items-center justify-between mb-4">
      <h3 class="text-lg font-semibold text-gray-900">Enviar a</h3>
      <button (click)="verTodosContactos()" class="text-purple-600 font-medium">Ver todos</button>
    </div>

    <!-- Contacto seleccionado -->
    <div *ngIf="contactoSeleccionado" class="mb-6 p-4 bg-purple-50 border-2 border-purple-200 rounded-lg">
      <div class="flex items-center space-x-3">
        <div class="w-12 h-12 bg-purple-600 rounded-full flex items-center justify-center">
          <span class="text-white font-semibold">{{ contactoSeleccionado.nombre.charAt(0) }}</span>
        </div>
        <div>
          <p class="font-medium text-gray-900">{{ contactoSeleccionado.nombre }}</p>
          <p class="text-sm text-gray-600" *ngIf="contactoSeleccionado.telefono">{{ contactoSeleccionado.telefono }}</p>
        </div>
        <div class="ml-auto">
          <svg class="w-6 h-6 text-purple-600" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
          </svg>
        </div>
      </div>
    </div>

    <!-- Contactos recientes -->
    <div *ngIf="!contactoSeleccionado">
      <div class="flex space-x-4 justify-center">
        <button *ngFor="let contacto of contactosRecientes"
                (click)="seleccionarContacto(contacto)"
                class="flex flex-col items-center p-3 hover:bg-gray-50 rounded-lg transition-colors">
          <img [src]="contacto.avatar" alt="Avatar" class="w-16 h-16 rounded-full mb-2">
          <span class="text-sm text-gray-700">{{ contacto.nombre }}</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Botón enviar -->
  <div class="fixed bottom-20 left-0 right-0 px-6 py-4 bg-white border-t border-gray-200">
    <button (click)="enviarDinero()"
            [disabled]="!puedeEnviar"
            class="w-full py-4 rounded-full font-semibold text-white transition-colors"
            [class.bg-purple-600]="puedeEnviar"
            [class.hover:bg-purple-700]="puedeEnviar"
            [class.bg-gray-300]="!puedeEnviar"
            [class.cursor-not-allowed]="!puedeEnviar">
      {{ puedeEnviar ? `Enviar S/ ${montoNumerico.toFixed(2)}` : 'Ingresa un monto y selecciona contacto' }}
    </button>
  </div>
</div>
